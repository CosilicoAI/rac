# Tests for 26 USC ยง 63 - Standard Deduction
#
# Test cases from IRS Publication 17 and Rev. Proc. 2023-34

metadata:
  module: statute.26.63
  description: Standard deduction test cases
  tags: [deductions, standard_deduction, irs]

tests:
  - name: Single filer 2024
    reference: Rev. Proc. 2023-34, Section 3.01
    period: 2024
    input:
      person: { age: 30 }
      filing_status: single
    output:
      standard_deduction: 14600

  - name: Married filing jointly 2024
    reference: Rev. Proc. 2023-34, Section 3.01
    period: 2024
    input:
      people:
        spouse1: { age: 35 }
        spouse2: { age: 33 }
      tax_units:
        tax_unit:
          members: [spouse1, spouse2]
          filing_status: joint
    output:
      standard_deduction: 29200

  - name: Married filing separately 2024
    reference: Rev. Proc. 2023-34, Section 3.01
    period: 2024
    input:
      person: { age: 40 }
      filing_status: separate
    output:
      standard_deduction: 14600

  - name: Head of household 2024
    reference: Rev. Proc. 2023-34, Section 3.01
    period: 2024
    input:
      people:
        parent: { age: 32 }
        child: { age: 8 }
      tax_units:
        tax_unit:
          members: [parent, child]
          filing_status: head_of_household
    output:
      standard_deduction: 21900

  - name: Single filer 2023
    reference: Rev. Proc. 2022-38, Section 3.01
    period: 2023
    input:
      person: { age: 30 }
      filing_status: single
    output:
      standard_deduction: 13850

  - name: Married filing jointly 2023
    reference: Rev. Proc. 2022-38, Section 3.01
    period: 2023
    input:
      people:
        spouse1: { age: 35 }
        spouse2: { age: 33 }
      tax_units:
        tax_unit:
          members: [spouse1, spouse2]
          filing_status: joint
    output:
      standard_deduction: 27700

  - name: Head of household 2023
    reference: Rev. Proc. 2022-38, Section 3.01
    period: 2023
    input:
      people:
        parent: { age: 32 }
        child: { age: 8 }
      tax_units:
        tax_unit:
          members: [parent, child]
          filing_status: head_of_household
    output:
      standard_deduction: 20800

  - name: Single filer 2022
    reference: Rev. Proc. 2021-45, Section 3.01
    period: 2022
    input:
      person: { age: 30 }
      filing_status: single
    output:
      standard_deduction: 12950

properties:
  - name: Standard deduction is non-negative
    for_all:
      variables: [standard_deduction]
      constraint: standard_deduction >= 0

  - name: Joint filers get double the single amount
    for_all:
      where:
        filing_status: [single, joint]
      constraint: |
        standard_deduction(filing_status: joint) == 2 * standard_deduction(filing_status: single)
