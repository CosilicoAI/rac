{
  "timestamp": "20251206_190618",
  "model": "claude-sonnet-4-20250514",
  "max_iterations": 10,
  "target_accuracy": 0.95,
  "provisions": {
    "ss_taxation": {
      "citation": "26 USC \u00a7 86",
      "complexity": 8,
      "phase": 3,
      "n_test_cases": 6,
      "success": true,
      "final_accuracy": 1.0,
      "iterations": 1,
      "submitted": true,
      "cost": {
        "input_tokens": 4328,
        "output_tokens": 1240,
        "total_tokens": 5568,
        "input_cost_usd": 0.012984,
        "output_cost_usd": 0.018600000000000002,
        "total_cost_usd": 0.031584,
        "model": "claude-sonnet-4-20250514"
      },
      "final_code": "def calculate(inputs: dict) -> dict:\n    # Extract inputs\n    magi = inputs.get(\"modified_adjusted_gross_income\", inputs.get(\"magi\", 0))\n    ss_benefits = inputs.get(\"social_security_benefits\", inputs.get(\"ss_benefits\", 0))\n    filing_status = inputs.get(\"filing_status\", \"SINGLE\")\n    \n    # Calculate combined income\n    combined_income = magi + 0.5 * ss_benefits\n    \n    # Set base amounts based on filing status (2024 parameters)\n    if filing_status == \"JOINT\":\n        base_amount = 32000\n        adjusted_base = 44000\n    elif filing_status == \"MARRIED_FILING_SEPARATELY\":\n        base_amount = 0\n        adjusted_base = 0\n    else:  # SINGLE, HEAD_OF_HOUSEHOLD\n        base_amount = 25000\n        adjusted_base = 34000\n    \n    # Calculate taxable social security benefits\n    if combined_income <= base_amount:\n        # No taxation\n        taxable_ss_benefits = 0\n    elif combined_income <= adjusted_base:\n        # First tier: up to 50% inclusion\n        taxable_ss_benefits = min(0.5 * ss_benefits, 0.5 * (combined_income - base_amount))\n    else:\n        # Second tier: up to 85% inclusion\n        first_tier = min(0.5 * ss_benefits, 0.5 * (adjusted_base - base_amount))\n        second_tier = 0.85 * (combined_income - adjusted_base)\n        taxable_ss_benefits = min(0.85 * ss_benefits, first_tier + second_tier)\n    \n    return {\"taxable_social_security_benefits\": taxable_ss_benefits}"
    },
    "niit": {
      "citation": "26 USC \u00a7 1411",
      "complexity": 7,
      "phase": 3,
      "n_test_cases": 8,
      "success": true,
      "final_accuracy": 1.0,
      "iterations": 1,
      "submitted": true,
      "cost": {
        "input_tokens": 4047,
        "output_tokens": 1020,
        "total_tokens": 5067,
        "input_cost_usd": 0.012141,
        "output_cost_usd": 0.015300000000000001,
        "total_cost_usd": 0.027441,
        "model": "claude-sonnet-4-20250514"
      },
      "final_code": "def calculate(inputs: dict) -> dict:\n    # Extract inputs\n    net_investment_income = inputs.get(\"net_investment_income\", 0)\n    modified_adjusted_gross_income = inputs.get(\"modified_adjusted_gross_income\", 0)\n    filing_status = inputs.get(\"filing_status\", \"SINGLE\")\n    \n    # Threshold amounts based on filing status\n    thresholds = {\n        \"JOINT\": 250000,\n        \"MARRIED_FILING_SEPARATELY\": 125000,\n        \"SINGLE\": 200000,\n        \"HEAD_OF_HOUSEHOLD\": 200000  # \"any other case\"\n    }\n    \n    # Get threshold for filing status\n    threshold = thresholds.get(filing_status, 200000)\n    \n    # Calculate excess of MAGI over threshold\n    excess_magi = max(0, modified_adjusted_gross_income - threshold)\n    \n    # Tax is 3.8% of the lesser of NII or excess MAGI\n    tax_base = min(net_investment_income, excess_magi)\n    niit_tax = 0.038 * tax_base\n    \n    return {\"niit_tax\": niit_tax}"
    }
  },
  "summary": {
    "total_provisions": 2,
    "successful": 2,
    "total_cost_usd": 0.059025,
    "mean_iterations": 1.0
  }
}